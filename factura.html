<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Factura</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
    @media print {
      body {
        margin: 0;
      }
    }

    body {
      font-family: Arial, sans-serif;
      margin: 40px;
      color: #000;
    }

    .header {
      display: flex;
      justify-content: space-between;
      margin-bottom: 30px;
    }

    .empresa {
      max-width: 60%;
    }

    .factura-info {
      text-align: right;
    }

    h1 {
      margin: 0 0 10px 0;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }

    th, td {
      border: 1px solid #000;
      padding: 8px;
      text-align: left;
    }

    th {
      background: #eee;
    }

    .totales {
      width: 40%;
      margin-left: auto;
      margin-top: 20px;
    }

    .totales td {
      border: none;
      padding: 6px;
    }

    .totales tr td:last-child {
      text-align: right;
    }

    .right {
      text-align: right;
    }

    .footer {
      margin-top: 40px;
      font-size: 12px;
    }
  </style>

<!-- esta sona es exclusiva de ocultar el nav en las facturas -->

<style>
  @media print {
    .no-print {
      display: none !important;
    }

    body {
      margin: 0;
    }

    main {
      padding: 0;
    }
  }
</style>


</head>
<body>

  <nav class="container-fluid no-print">
  <ul>
    <li><strong>MRS TPV</strong></li>
  </ul>
  <ul>
    <li id="rol-info"></li>

    <li><a href="caja.html" id="caja-link">Caja</a></li>
    <li><a href="historial.html" id="historial-link">Historial</a></li>
    <li><a href="exportes.html" id="exportes-link">Exportes</a></li>
    <li><a href="configuracion.html" id="config-link">Configuración</a></li>

    <li><a href="#" onclick="logout()" role="button">Cerrar sesión</a></li>
  </ul>
</nav>


  <div class="header">
    <div class="empresa">
      <h1 id="empresa-nombre">TU EMPRESA</h1>
      <div id="empresa-datos">
        Dirección<br>
        CIF: XXXXXXXX<br>
        Tel: 000 000 000
      </div>
    </div>

    <div class="factura-info">
      <h2>FACTURA</h2>
      Nº: <strong id="factura-numero"></strong><br>
      Fecha: <span id="factura-fecha"></span>
    </div>
  </div>

  <table>
    <thead>
      <tr>
        <th>Descripción</th>
        <th>Cant.</th>
        <th>Precio</th>
        <th>Base</th>
      </tr>
    </thead>
    <tbody id="lineas"></tbody>
  </table>

  <table class="totales">
    <tr><td>Subtotal</td><td id="subtotal"></td></tr>
    <tr><td>IVA</td><td id="iva"></td></tr>
    <tr><td>Recargo</td><td id="recargo"></td></tr>
    <tr><td><strong>TOTAL</strong></td><td><strong id="total"></strong></td></tr>
  </table>

  <div class="footer">
    Método de pago: <span id="metodo-pago"></span><br>
    Gracias por su confianza.
  </div>

  <script src="js/factura.js" type="module"></script>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const rol = sessionStorage.getItem("rol");

    if (!rol) {
      window.location.href = "login.html";
      return;
    }

    const rolInfo = document.getElementById("rol-info");
    if (rolInfo) rolInfo.innerText = "Rol: " + rol;

    if (rol !== "admin") {
      const hide = ["config-link", "exportes-link"];
      hide.forEach(id => {
        const el = document.getElementById(id);
        if (el) el.style.display = "none";
      });
    }
  });
</script>





</body>
</html>
